(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],[,,function(e,t,n){},,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),s=(n(10),n(2),n(1));var u=function(e){var t=e.message;return Object.keys(t).map((function(e){return r.a.createElement("li",{className:"message",key:e},r.a.createElement("div",{className:"meta-info"},r.a.createElement("span",{className:"user"},t[e].user),r.a.createElement("span",{className:"at"},"@"),r.a.createElement("span",{className:"time-stamp"},t[e].timeStamp)),r.a.createElement("p",{className:"text-message"},t[e].text))}))};var l=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),l=u[0],i=u[1],f=Object(a.useState)(""),h=Object(s.a)(f,2),d=h[0],E=h[1],g=function(e){E(""),function(e){return fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then((function(e){return c(e)})).catch((function(e){return E(e.error)})),i("")};return n?r.a.createElement(m,{messageIds:n}):r.a.createElement("div",{className:"login"},r.a.createElement("h2",{className:"error"},d),r.a.createElement("label",null,"Username:",r.a.createElement("input",{value:l,onChange:function(e){return i(e.target.value)}})),r.a.createElement("button",{className:"login-button",onClick:function(){return g(l)}},"Login"))};var i=function(e){var t=e.loggedInUsers;return r.a.createElement("ul",{className:"display-users"},t.map((function(e){return r.a.createElement("li",{className:"logged-in-users",key:e},e)})))};var m=function(e){var t=e.messageIds,n=Object(a.useState)(""),c=Object(s.a)(n,2),o=c[0],m=c[1],f=Object(a.useState)(),h=Object(s.a)(f,2),d=h[0],E=h[1],g=Object(a.useState)(t),j=Object(s.a)(g,2),b=j[0],v=j[1],p=Object(a.useState)(!1),O=Object(s.a)(p,2),N=O[0],k=O[1],S=r.a.createElement(u,{message:b.messages}),y=function(){E(""),function(e){return fetch("/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(o).then((function(e){return v(e)})).catch((function(e){return E(e.error)})),m("")},w=function(){E(""),fetch("/logout",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){return k(!0)})).catch((function(e){return E(e.error)}))};return N?r.a.createElement(l,null):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("button",{className:"logout-button",onClick:function(){return w()}},"Logout")),r.a.createElement("div",{className:"active-users"},r.a.createElement("h3",{className:"header"},"Active Users"),r.a.createElement(i,{loggedInUsers:b.loggedInUsers})),r.a.createElement("div",{className:"display-panel"},r.a.createElement("p",{className:d},d),r.a.createElement("ol",{className:"send-messages"},r.a.createElement("div",{className:"messsage"},S))),r.a.createElement("div",{className:"send-form"},r.a.createElement("label",null,"Enter your message",r.a.createElement("input",{value:o,onChange:function(e){return m(e.target.value)}})),r.a.createElement("button",{onClick:function(){return y()}},"Send")))};var f=function(){var e,t=Object(a.useState)({}),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(""),i=Object(s.a)(u,2),f=i[0],h=i[1];return Object(a.useEffect)((function(){h(""),fetch("/home",{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return o(e)})).catch((function(e){return h(e)}))}),[]),e=c.isLoggedin?r.a.createElement(m,{messageIds:c}):r.a.createElement(l,null),r.a.createElement("div",null,r.a.createElement("h2",{className:"error"},f),e)};var h=function(){return r.a.createElement("ul",{className:"chat-app"},r.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.43c6083f.chunk.js.map