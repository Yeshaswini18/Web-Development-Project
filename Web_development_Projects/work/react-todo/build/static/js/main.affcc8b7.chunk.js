(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,function(e,t,n){},,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),c=n.n(o),u=(n(10),n(1)),s=(n(2),function(e){return fetch("/tasks/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}),i=function(e,t,n){return fetch("/tasks/".concat(e,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:n})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))};var l=function(){var e=Object(r.useState)(),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],m=Object(r.useState)(),f=Object(u.a)(m,2),d=f[0],j=f[1],E=function(e){/^ *$/.test(e)?(j("Enter a valid username"),l("")):(j(""),function(e){return fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then((function(e){return o(e.data.username)})).catch((function(e){return j(e.message)})))};return n?a.a.createElement(h,{userInfo:i}):a.a.createElement("div",{className:"login"},a.a.createElement("h2",{className:"error"},d),a.a.createElement("label",{className:"username"},"Username:",a.a.createElement("input",{value:i,onChange:function(e){return l(e.target.value)}})),a.a.createElement("button",{className:"login-button",onClick:function(){return E(i)}},"Login"))};var m=function(e){var t=e.tasks,n=e.userInfo,o=e.performReadAll,c=Object(r.useState)(""),s=Object(u.a)(c,2),l=s[0],m=s[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),d=h[0],j=h[1],E=Object(r.useState)(),k=Object(u.a)(E,2),b=k[0],g=k[1],p=function(e){(function(e,t){return fetch("/tasks/".concat(e,"/").concat(t),{method:"DELETE"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))})(n,e).then((function(){return o()})).catch((function(e){return g(e.message)}))};return Object.keys(t).map((function(e){return a.a.createElement("div",{className:"task",key:e},a.a.createElement("h2",{className:"error"},b),a.a.createElement("p",null,a.a.createElement("span",{className:"delete",onClick:function(){return p(e)}},"X"),a.a.createElement("input",{id:e,type:"task-text",class:t[e].done?"mark-done":"done",name:"task-field",value:e===d?l:t[e].name,onChange:function(t){!function(e,t){j(e),m(t.target.value)}(e,t)}}),a.a.createElement("button",{class:"update",type:"button",onClick:function(){return function(e,t){i(n,e,{done:t,name:l}).then((function(){return o()})).catch((function(e){return g(e.message)})),j(""),m("")}(e,t[e].done)}},"Update"),a.a.createElement("button",{class:"done-button",type:"button",onClick:function(){return function(e,t,r){i(n,e,{done:!t,name:r}).then((function(){return o()})).catch((function(e){return g(e.message)}))}(e,t[e].done,t[e].name)}},t[e].done?"Done":"MarkDone")))}))};var f=function(e){var t=e.userInfo,n=Object(r.useState)(),o=Object(u.a)(n,2),c=o[0],i=o[1],l=Object(r.useState)(),f=Object(u.a)(l,2),h=f[0],d=f[1],j=Object(r.useState)({}),E=Object(u.a)(j,2),k=E[0],b=E[1],g=Object(r.useState)(),p=Object(u.a)(g,2),v=p[0],O=p[1],P=function(){"undefined"===typeof c||/^ *$/.test(c)?(d("Enter a valid task"),i("")):(d(""),function(e,t){return fetch("/tasks/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:t})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(t,{done:!1,name:c}).then((function(){return N()})).catch((function(e){return d(e.message)})),i(""))},N=function(){d(""),s(t).then((function(e){return b(e.data)})).catch((function(e){return d(e.message)}))},S=function(){var e;d(""),(e=t,fetch("/tasks/".concat(e),{method:"DELETE"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(){return N()})).catch((function(e){return d(e.message)}))},y=function(e,t){var n={};if("ascending"===t)Object.values(e.data).sort((function(e,t){return e.name>t.name?1:-1})).forEach((function(e){return n[e.taskId]=e}));else if("descending"===t){Object.values(e.data).sort((function(e,t){return e.name>t.name?-1:1})).forEach((function(e){return n[e.taskId]=e}))}else if("Completed-tasks"===t){Object.values(e.data).sort((function(e,t){return e.done===t.done?0:e.done?-1:1})).forEach((function(e){return n[e.taskId]=e}))}else{if("Incomplete-tasks"!==t)return e.data;Object.values(e.data).sort((function(e,t){return e.done===t.done?0:e.done?1:-1})).forEach((function(e){return n[e.taskId]=e}))}return n};return a.a.createElement("div",null,a.a.createElement("h2",{className:"error"},h),a.a.createElement("button",{className:"delete-all",onClick:function(){return S()}},"DeleteAll"),a.a.createElement("button",{className:"refresh-button",onClick:function(){return d(""),void s(t).then((function(e){return y(e,v)})).then((function(e){return b(e)})).catch((function(e){return d(e.message)}))}},"Refresh"),a.a.createElement("label",null,"Enter Task",a.a.createElement("input",{class:"add-task",value:c,onChange:function(e){return i(e.target.value)}})),a.a.createElement("button",{type:"button",class:"to-add",onClick:function(){return P()}},"Add"),a.a.createElement("span",{className:"sorting"},a.a.createElement("label",{for:"tasks"},"Sort:"),a.a.createElement("select",{name:"theme",id:"themes",onChange:function(e){O(e.target.value),function(e){d(""),O(e),s(t).then((function(t){return y(t,e)})).then((function(e){return b(e)})).catch((function(e){return d(e.message)}))}(e.target.value)}},a.a.createElement("option",{value:"select-order"},"select-order"),a.a.createElement("option",{value:"ascending"},"ascending"),a.a.createElement("option",{value:"descending"},"descending"),a.a.createElement("option",{value:"Completed-tasks"},"Completed-tasks"),a.a.createElement("option",{value:"Incomplete-tasks"},"Incomplete-tasks"))),a.a.createElement(m,{tasks:k,userInfo:t,performReadAll:function(){return N()}}))};var h=function(e){var t=e.userInfo,n=Object(r.useState)(!1),o=Object(u.a)(n,2),c=o[0],s=o[1],i=Object(r.useState)(),m=Object(u.a)(i,2),h=m[0],d=m[1],j=Object(r.useState)(),E=Object(u.a)(j,2),k=E[0],b=E[1],g=function(){b(""),fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){return s(!0)})).catch((function(e){return b(e.message)}))},p=function(e){b(""),function(e,t){return fetch("/theme/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({theme:t})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(t,e).then((function(){return v()})).catch((function(e){return b(e.message)}))},v=function(){var e;b(""),(e=t,fetch("/theme/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){return d(e.data)})).catch((function(e){return b(e.message)}))};return c?a.a.createElement(l,null):a.a.createElement("div",null,a.a.createElement("div",{className:h||"light"},a.a.createElement("h1",{className:"header"},"Welcome to your Page"),a.a.createElement("h2",{className:"error"},k),a.a.createElement("div",{className:"choose-theme"},a.a.createElement("label",{for:"theme"},"Choose a theme:"),a.a.createElement("select",{name:"theme",id:"themes",onChange:function(e){return p(e.target.value)}},a.a.createElement("option",{value:"light"},"light"),a.a.createElement("option",{value:"dark"},"dark"),a.a.createElement("option",{value:"colorful"},"colorful")))),a.a.createElement("button",{className:"logout-button",onClick:function(){return g()}},"Logout"),a.a.createElement("div",{className:"todo-page"},a.a.createElement(f,{userInfo:t})))};var d=function(){var e,t=Object(r.useState)(),n=Object(u.a)(t,2),o=n[0],c=n[1],s=Object(r.useState)(),i=Object(u.a)(s,2),m=i[0],f=i[1];return Object(r.useEffect)((function(){f(""),fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return c(e.data.username)})).catch((function(e){return f(e.message)}))}),[]),"no valid session"===m&&f("     "),e=m?a.a.createElement(l,null):a.a.createElement(h,{userInfo:o}),a.a.createElement("div",{className:"App"},a.a.createElement("h2",{className:"error"},m),e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.affcc8b7.chunk.js.map