(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],[,,function(e,t,a){},,,function(e,t,a){e.exports=a(11)},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(4),o=a.n(r),l=(a(10),a(1));a(2);var s=function(e){var t=e.receipt,a=e.userInfo,r=e.movies,o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=s[0],m=s[1];return i?c.a.createElement("div",null,c.a.createElement(u,{movies:r,userInfo:a,status:"loggedIn"})):c.a.createElement("div",{className:"receipt"},c.a.createElement("button",{className:"back-button",onClick:function(){return m(!0)}},"Return to Home Page"),c.a.createElement("h2",{className:"welcome-message"},"Booking Successful!!!"),c.a.createElement("div",null,c.a.createElement("img",{className:"single-image",src:t.poster,alt:""}),c.a.createElement("div",{className:"movie-details"},c.a.createElement("img",{className:"QR-code",src:t.QRcode,alt:""}),c.a.createElement("p",{className:"title"},c.a.createElement("b",null,"Title: "),t.title),c.a.createElement("p",{className:"theater"},c.a.createElement("b",null,"Theater: "),t.theater),c.a.createElement("p",{className:"timing"},c.a.createElement("b",null,"Timing: "),t.timing),c.a.createElement("p",{className:"Date"},c.a.createElement("b",null,"Date: "),t.date),c.a.createElement("p",{className:"total"},c.a.createElement("b",null,"Total: "),t.total))))};var i=function(e){var t=e.userInfo,a=e.movies,r=e.movieInfo,o=(e.status,Object(n.useState)()),i=Object(l.a)(o,2),m=i[0],E=i[1],g=Object(n.useState)(),f=Object(l.a)(g,2),b=f[0],v=f[1],h=Object(n.useState)(),d=Object(l.a)(h,2),j=d[0],p=d[1],N=Object(n.useState)(1),k=Object(l.a)(N,2),O=k[0],y=k[1],S=Object(n.useState)(!1),w=Object(l.a)(S,2),I=w[0],T=w[1],P=Object(n.useState)(),C=Object(l.a)(P,2),D=C[0],L=C[1],B=r.ticketPrice*O;if(j){var R=Date.now(),H=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).format(R),x=r.expiryDate,A=new Date(j.slice(0,4),j.slice(5,7)-1,j.slice(8,10)),F=new Date(x.slice(6,10),x.slice(0,2)-1,x.slice(3,5)),G=new Date(H.slice(6,10),H.slice(0,2)-1,H.slice(3,5));(A>F||A<G)&&(E("Enter a valid Date"),p())}var J=function(){E(""),!j||!b||O<1?E("All fields are required and has to be valid"):O-Math.floor(O)!==0?E("Enter a valid ticket count"):function(e,t,a,n,c){return fetch("/bookings/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({movieId:t,timing:a,date:n,tickets:c})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(t,r.movieId,b,j,O).then((function(e){return Q(e.data)})).catch((function(e){return E(e.message)}))},Q=function(e){E(""),function(e,t){return fetch("/bookings/".concat(e,"/").concat(t),{method:"GET"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(t,e).then((function(e){return L(e.data)})).catch((function(e){return E(e.message)}))};return D?c.a.createElement(s,{receipt:D,movies:a,userInfo:t}):I?c.a.createElement(u,{movies:a,userInfo:t,status:"loggedIn"}):c.a.createElement("div",{className:"booking"},c.a.createElement("h2",{className:"error"},m),c.a.createElement("button",{className:"back-button",onClick:function(){return T(!0)}},"Return to Home Page"),c.a.createElement("div",null,c.a.createElement("img",{className:"single-image",src:r.poster,alt:""}),c.a.createElement("div",{className:"movie-details"},c.a.createElement("p",{className:"title"},c.a.createElement("b",null,"Title: "),r.title),c.a.createElement("p",{className:"language"},c.a.createElement("b",null,"Language: "),r.language),c.a.createElement("span",{className:"timings"},c.a.createElement("label",{for:"time"},"Select Timings:"),c.a.createElement("select",{name:"time",onChange:function(e){v(e.target.value)}},c.a.createElement("option",{value:"select-time"},"select-time"),Object.keys(r.timings).map((function(e){return c.a.createElement("option",{value:r.timings[e]},r.timings[e])})))),c.a.createElement("p",{className:"expiry-date"},c.a.createElement("b",null,"Played till:"),r.expiryDate),c.a.createElement("p",null,c.a.createElement("label",{for:"Date"},"Select date:"),c.a.createElement("input",{type:"date",name:"movie-date",onChange:function(e){return p(e.target.value)}})),c.a.createElement("label",null,"Number of Tickets: "),c.a.createElement("input",{type:"number",name:"tickets",value:O,onChange:function(e){return y(e.target.value)}}),c.a.createElement("h3",{className:"total-cost"},"Total Amount:$",B),c.a.createElement("button",{className:"checkout-button",onClick:function(){return J()}},"checkout"))))};var m=function(e){var t=e.movieInfo,a=e.status,r=e.movies,o=e.userInfo,s=Object(n.useState)(!1),m=Object(l.a)(s,2),E=m[0],g=m[1],f=Object(n.useState)(!1),b=Object(l.a)(f,2),v=b[0],h=b[1],d=Object(n.useState)(""),j=Object(l.a)(d,2),p=j[0],N=j[1];if(v){if("loggedOut"!==a)return c.a.createElement(i,{userInfo:o,movies:r,movieInfo:t,status:a});N("Login to book"),h(!1)}return E?"loggedIn"===a?c.a.createElement("div",null,c.a.createElement(u,{movies:r,userInfo:o,status:"loggedIn"})):c.a.createElement("div",null,c.a.createElement(u,{movies:r,userInfo:"       ",status:"loggedOut"})):c.a.createElement("div",{className:"movie"},c.a.createElement("h2",{className:"error"},p),c.a.createElement("button",{className:"back-button",onClick:function(){return g(!0)}},"Return to Home Page"),c.a.createElement("div",null,c.a.createElement("img",{className:"single-image",src:t.poster,alt:""}),c.a.createElement("div",{className:"movie-details"},c.a.createElement("p",{className:"title"},c.a.createElement("b",null,"Title: "),t.title),c.a.createElement("p",{className:"language"},c.a.createElement("b",null,"Language: "),t.language),c.a.createElement("p",{className:"description"},c.a.createElement("b",null,"Description: "),t.description),c.a.createElement("p",{className:"ratings"},c.a.createElement("b",null,"Ratings: "),t.ratings),c.a.createElement("p",{className:"ticket-price"},c.a.createElement("b",null,"ticket Price: "),t.ticketPrice),c.a.createElement("p",{className:"theater"},c.a.createElement("b",null,"Theater: "),t.theater),c.a.createElement("p",{className:"expiry-date"},c.a.createElement("b",null,"Played till:"),t.expiryDate),c.a.createElement("label",{for:"timings"},"Available timinigs:"),Object.keys(t.timings).map((function(e){return c.a.createElement("button",{className:"timing",value:t.timings[e]},t.timings[e])})),c.a.createElement("button",{className:"book-button",onClick:function(){return h(!0)}},"Book"))))};var u=function(e){var t,a=e.movies,r=e.status,o=e.userInfo,s=Object(n.useState)(),i=Object(l.a)(s,2),u=i[0],E=i[1],g=Object(n.useState)(),f=Object(l.a)(g,2),b=f[0],v=f[1],h=Object(n.useState)(!1),d=Object(l.a)(h,2),j=d[0],p=d[1],N=Object(n.useState)(),k=Object(l.a)(N,2),O=k[0],y=k[1],S=Object(n.useState)(),w=Object(l.a)(S,2),I=w[0],T=w[1],P=Object(n.useState)(),C=Object(l.a)(P,2),D=C[0],L=C[1],B=Object(n.useState)(!1),R=Object(l.a)(B,2),H=R[0],x=R[1];t=a||{};var A=function(e){E(""),function(e){return fetch("/movies/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then((function(e){v(e.data),p(!0)})).catch((function(e){return E(e.message)}))};return H&&(O||I||D?(y(),L(),T()):(t=a,x(!1))),j?c.a.createElement(m,{movieInfo:b,status:r,movies:a,userInfo:o}):(O&&("select-language"===O?y():t=Object.keys(t).reduce((function(e,a){return O.includes(t[a].language)&&(e[a]=t[a]),e}),{})),I&&("select-Type"===I?T():t=Object.keys(t).reduce((function(e,a){return I.includes(t[a].movieType)&&(e[a]=t[a]),e}),{})),D&&("select-location"===D?L():t=Object.keys(t).reduce((function(e,a){return D.includes(t[a].location)&&(e[a]=t[a]),e}),{})),c.a.createElement("div",{className:"movies"},c.a.createElement("h2",{className:"error"},u),c.a.createElement("h2",{className:"now-showing"},"Now showing"),c.a.createElement("span",{className:"filters"},"Apply Filters: "),c.a.createElement("span",{className:"filter-language"},c.a.createElement("label",{for:"language"},"Language:"),c.a.createElement("select",{id:"language",name:"language",onChange:function(e){return y(e.target.value)},value:O||"select-language"},c.a.createElement("option",null,"select-language"),c.a.createElement("option",{value:"English"},"English"),c.a.createElement("option",{value:"Spanish"},"Spanish"),c.a.createElement("option",{value:"French"},"French"))),c.a.createElement("span",{className:"filter-movietype"},c.a.createElement("label",{for:"movie-type"},"Movie-Type:"),c.a.createElement("select",{name:"movie-type",onChange:function(e){return T(e.target.value)},value:I||"select-type"},c.a.createElement("option",null,"select-type"),c.a.createElement("option",{value:"Thriller"},"Thriller"),c.a.createElement("option",{value:"Horror"},"Horror"),c.a.createElement("option",{value:"Comedy"},"Comedy"))),c.a.createElement("span",{className:"filter-location"},c.a.createElement("label",{for:"location"},"Location:"),c.a.createElement("select",{name:"location",onChange:function(e){return L(e.target.value)},value:D||"select-location"},c.a.createElement("option",null,"select-location"),c.a.createElement("option",{value:"Washington"},"Washington"),c.a.createElement("option",{value:"California"},"California"),c.a.createElement("option",{value:"Nevada"},"Nevada"))),c.a.createElement("button",{className:"refresh",onClick:function(){return x(!0)}},"Reset"),c.a.createElement("div",{className:"movie-images"},Object.keys(t).map((function(e){return c.a.createElement("img",{className:"image",src:t[e].poster,title:t[e].title,onClick:function(){return A(e)},alt:""})})))))};var E=function(e){var t=e.bookings,a=e.movies,r=e.userInfo,o=e.performViewBookings,s=Object(n.useState)(!1),i=Object(l.a)(s,2),m=i[0],u=i[1],E=Object(n.useState)(),f=Object(l.a)(E,2),b=f[0],v=f[1];console.log(t);var h=function(e){v(""),function(e,t){return fetch("/bookings/".concat(e,"/").concat(t),{method:"DELETE"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(r,e).then((function(){return o()})).catch((function(e){return v(e.message)}))};return m?c.a.createElement("div",null,c.a.createElement(g,{userInfo:r,movies:a})):c.a.createElement("div",{className:"bookings"},c.a.createElement("h2",{className:"error"},b),c.a.createElement("h2",{className:"welcome-message"},"Hey ",r,"!!! here are your Bookings"),c.a.createElement("button",{className:"back-button",onClick:function(){return u(!0)}},"Return to home page"),Object.keys(t).map((function(e){return c.a.createElement("div",{className:"bookings-info"},c.a.createElement("img",{className:"single-image",src:t[e].poster,alt:""}),c.a.createElement("div",{className:"movie-details"},c.a.createElement("img",{className:"QR-code",src:t[e].QRcode,alt:""}),c.a.createElement("p",{className:"title"},c.a.createElement("b",null,"Title: "),t[e].title),c.a.createElement("p",{className:"theater"},c.a.createElement("b",null,"Theater: "),t[e].theater),c.a.createElement("p",{className:"timing"},c.a.createElement("b",null,"Timing: "),t[e].timing),c.a.createElement("p",{className:"Date"},c.a.createElement("b",null,"Date: "),t[e].date),c.a.createElement("p",{className:"total"},c.a.createElement("b",null,"Total: "),t[e].total),c.a.createElement("button",{className:"delete-booking",onClick:function(){return h(e)}},"Cancel Booking")))})))};var g=function(e){var t=e.userInfo,a=e.movies,r=Object(n.useState)(),o=Object(l.a)(r,2),s=o[0],i=o[1],m=Object(n.useState)(!1),g=Object(l.a)(m,2),b=g[0],v=g[1],h=Object(n.useState)(),d=Object(l.a)(h,2),j=d[0],p=d[1],N=function(){i(""),fetch("/session",{method:"DELETE"}).catch((function(){return Promise.reject({code:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(){return v(!0)})).catch((function(e){return i(e.message)}))},k=function(){var e;i(""),(e=t,fetch("/bookings/".concat(e),{method:"GET"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))).then((function(e){return p(e.data)})).catch((function(e){return i(e.message)}))};return b?c.a.createElement(f,{movies:a}):j?c.a.createElement("div",null,c.a.createElement(E,{bookings:j,movies:a,userInfo:t,performViewBookings:function(){return k()}})):c.a.createElement("div",null,c.a.createElement("h2",{className:"error"},s),c.a.createElement("button",{className:"logout-button",onClick:function(){return N()}},"Logout"),c.a.createElement("button",{className:"customers-booking",onClick:function(){return k()}},"Your bookings"),c.a.createElement("h2",{className:"welcome-message"},"Hello ",t," !! "),c.a.createElement(u,{movies:a,userInfo:t,status:"loggedIn"}))};var f=function(e){var t=e.movies,a=Object(n.useState)(),r=Object(l.a)(a,2),o=r[0],s=r[1],i=Object(n.useState)(""),m=Object(l.a)(i,2),E=m[0],f=m[1],b=Object(n.useState)(),v=Object(l.a)(b,2),h=v[0],d=v[1],j=function(e){/^ *$/.test(e)||e.includes("dog")?(d("Enter a valid username"),f("")):(d(""),function(e){return fetch("/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(e).then((function(e){return s(e.data)})).catch((function(e){return d(e.message)})))};return o?c.a.createElement(g,{userInfo:o.username,movies:t}):c.a.createElement("div",{className:"login"},c.a.createElement("h2",{className:"error"},h),c.a.createElement("h3",{className:"warning"},"Please Login to Book"),c.a.createElement("div",{className:"form"},c.a.createElement("label",{className:"username"},"Username:",c.a.createElement("input",{value:E,onChange:function(e){return f(e.target.value)}})),c.a.createElement("button",{className:"login-button",onClick:function(){return j(E)}},"Login")),c.a.createElement(u,{movies:t,userInfo:"    ",status:"loggedOut"}))};var b=function(){var e,t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(),i=Object(l.a)(s,2),m=i[0],u=i[1],E=Object(n.useState)({}),b=Object(l.a)(E,2),v=b[0],h=b[1];return Object(n.useEffect)((function(){u(""),fetch("/session",{method:"GET"}).catch((function(){return Promise.reject({message:"network-error"})})).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){o(e.data.sid.username),h(e.data.moviesList)})).catch((function(e){u(e.message),h(e.data)}))}),[]),"no valid session"===m&&u("  "),e=m?c.a.createElement(f,{movies:v}):c.a.createElement(g,{userInfo:r,movies:v}),c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"main-heading"},"Book your show!!"),c.a.createElement("h2",{className:"error"},m),e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.8e1f5282.chunk.js.map